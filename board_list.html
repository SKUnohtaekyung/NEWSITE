<!DOCTYPE html>
<!-- 게시판 글 목록 페이지 (기본 UI) -->
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
  <meta charset="UTF-8">
  <title>Board List</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
  <h1>Board List</h1>

  <!-- 검색 폼 -->
  <section>
    <form th:action="@{/board_list}" method="get">
      <!-- 타임리프(th:value)로 검색어 유지 -->
      <input type="text" name="keyword" placeholder="검색어" th:value="${keyword}" />
      <button type="submit">검색</button>
    </form>
  </section>

  <section>
    <h2>Add Board</h2>
    <form th:action="@{/api/boards}" method="post">
      <div>
        <input type="text" name="title" placeholder="title" required />
      </div>
      <div>
        <input type="text" name="user" placeholder="user" required />
      </div>
      <div>
        <input type="text" name="newdate" placeholder="newdate" required />
      </div>
      <div>
        <input type="text" name="count" placeholder="count" required />
      </div>
      <div>
        <input type="text" name="likec" placeholder="likec" required />
      </div>
      <div>
        <textarea name="content" placeholder="content" rows="6" required></textarea>
      </div>
      <button type="submit">Add</button>
    </form>
  </section>

  <section>
    <h2>Boards</h2>
    <div th:if="${#lists.isEmpty(boards.content)}">No boards</div>
    <ul>
      <!-- 게시글 목록 반복 출력 (th:each) -->
      <li th:each="board : ${boards.content}">
        <!-- 상세 보기 링크 생성 (th:href) -->
        <a th:href="@{/board_view/{id}(id=${board.id})}" th:text="${board.title}">title</a>
        <span> - </span>
        <span th:text="${board.user}">user</span>
      </li>
    </ul>
  </section>

  <!-- 페이지네이션 -->
  <section>
    <ul>
      <li>
        <a th:href="@{/board_list(page=${currentPage - 1}, keyword=${keyword})}"
          th:classappend="${currentPage == 0} ? 'disabled'">
          이전
        </a>
      </li>
      <!-- 페이지 번호 시퀀스 생성 및 반복 (th:each) -->
      <li th:if="${totalPages > 0}" th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
        <a th:href="@{/board_list(page=${i}, keyword=${keyword})}" th:text="${i + 1}"
          th:classappend="${i == currentPage} ? 'active'">1</a>
      </li>
      <li>
        <a th:href="@{/board_list(page=${currentPage + 1}, keyword=${keyword})}"
          th:classappend="${currentPage + 1 >= totalPages} ? 'disabled'">
          다음
        </a>
      </li>
    </ul>
  </section>

  <p><a th:href="@{/}">Home</a></p>
</body>

</html>